<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <!--
    NOTE: A different search index is defined because when testing searches it is using a template 
    index that is copied to the bin folder on each build and since the index tests may run before
    the search tests, we don't want to change what is in the index.
  -->
  
  
  <configSections>
    <section name="Examine" type="Examine.Config.ExamineSettings, Examine"/>
    <section name="ExamineLuceneIndexSets" type="UmbracoExamine.Config.ExamineLuceneIndexes, UmbracoExamine"/>
  </configSections>
  
  <Examine>
    <ExamineIndexProviders enableDefaultEventHandler="false">
      <providers>

        <!-- Used to show convension over configuration, this maps to the IndexSet ConvensionNamedIndexSet based on naming convensions -->
        <!-- The only reason we're specifying the dataService here is because this is not running in the Umbraco context -->
        <!-- This is the bare minimum config, which means it will index everything by default -->
        <add name="ConvensionNamedIndexer" type="UmbracoExamine.LuceneExamineIndexer, UmbracoExamine"
             dataService="Examine.Test.DataServices.TestDataService, Examine.Test"/>
        
        <!-- Shows all of the configuration options available -->
        <add name="CWSIndexer" type="UmbracoExamine.LuceneExamineIndexer, UmbracoExamine"
             dataService="Examine.Test.DataServices.TestDataService, Examine.Test"
             indexSet="CWSIndexSet"
             supportUnpublished="false"
             supportProtected="false"
             runAsync="false"
             interval="5"
             analyzer="Lucene.Net.Analysis.Standard.StandardAnalyzer, Lucene.Net" />

        <add name="FileIndexer" type="UmbracoExamine.FileIndexer, UmbracoExamine"
             dataService="Examine.Test.DataServices.TestDataService, Examine.Test"/>
      </providers>
    </ExamineIndexProviders>
    <ExamineSearchProviders defaultProvider="CWSSearcher">
      <providers>

        <!-- Used to show how to create a searcher by naming convensions -->
        <add name="ConvensionNamedSearcher" type="UmbracoExamine.LuceneExamineSearcher, UmbracoExamine" />

        <!-- This search provider is used for our test searches -->
        <add name="CWSSearcher" type="UmbracoExamine.LuceneExamineSearcher, UmbracoExamine"
           indexSet="CWSIndexSet"/>

        <add name="FileSearcher" type="UmbracoExamine.LuceneExamineSearcher, UmbracoExamine" />
      </providers>
    </ExamineSearchProviders>
  </Examine>

  <ExamineLuceneIndexSets>

    <!-- Shows the bare minimum setup required for an index set -->
    <IndexSet SetName="ConvensionNamedIndexSet" IndexPath="App_Data\ConvensionNamedTest" />

    <!-- Shows most options except for exclude -->
    <IndexSet SetName="CWSIndexSet" IndexPath="App_Data\CWSIndexSetTest">
      <IndexAttributeFields>
        <add Name="id" />
        <add Name="nodeName" EnableSorting="true" />
        <add Name="updateDate" />
        <add Name="writerName" />
        <add Name="path" />
        <add Name="nodeTypeAlias" />
        <add Name="parentID" />
      </IndexAttributeFields>
      <IndexUserFields>
        <add Name="headerText" EnableSorting="true" />
        <add Name="bodyText" EnableSorting="true" />
        <add Name="metaDescription" />
        <add Name="metaKeywords" />
        <add Name="bodyTextColOne" />
        <add Name="bodyTextColTwo" />
      </IndexUserFields>
      <IncludeNodeTypes>
        <add Name="CWS_Home" />
        <add Name="CWS_Textpage" />
        <add Name="CWS_TextpageTwoCol" />
        <add Name="CWS_NewsEventsList" />
        <add Name="CWS_NewsItem" />
        <add Name="CWS_Gallery" />
        <add Name="CWS_EventItem" />
      </IncludeNodeTypes>
      <ExcludeNodeTypes />
    </IndexSet>

    <IndexSet SetName="FileIndexSet" IndexPath="App_Data\FileIndexSet" />
  </ExamineLuceneIndexSets>
  
</configuration>